/* --- Heart Crossing Palette --- */
:root {
    --bg-pink: #ffdae0;
    --grass-pattern: rgba(255, 255, 255, 0.4);
    --ui-cream: #fffdf5;
    --ui-border: #ffb7b2;
    --text-brown: #6d5b6b;
    --accent-teal: #a2d2ff;
    --accent-pop: #ff8fab;
    
    --font-ui: 'Varela Round', sans-serif;
    --font-cute: 'Fredoka', sans-serif;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    background-color: var(--bg-pink);
    color: var(--text-brown);
    font-family: var(--font-ui);
    height: 100vh;
    overflow: hidden;
    
    /* THE MIX: Animal Crossing Grass Pattern but in Pink/White */
    background-image: 
        radial-gradient(var(--grass-pattern) 15%, transparent 16%),
        radial-gradient(var(--grass-pattern) 15%, transparent 16%);
    background-size: 50px 50px;
    background-position: 0 0, 25px 25px;
    position: relative;
}

/* --- Floating Elements (Heartopia) --- */
.bg-decor { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
.cloud { position: absolute; color: white; opacity: 0.8; font-size: 3rem; animation: float 10s ease-in-out infinite; }
.heart { position: absolute; color: white; opacity: 0.5; font-size: 2rem; animation: float 6s ease-in-out infinite reverse; }
.c1 { top: 10%; left: 5%; } .c2 { bottom: 15%; right: 10%; }
.h1 { top: 20%; right: 20%; } .h2 { bottom: 20%; left: 20%; }
@keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

/* --- Intro (Isabelle Speech Bubble) --- */
#intro-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(255, 218, 224, 0.6);
    backdrop-filter: blur(5px);
    display: flex; justify-content: center; align-items: center;
    z-index: 100; transition: opacity 0.5s ease;
}

.speech-bubble {
    background: var(--ui-cream);
    padding: 30px 50px;
    border-radius: 30px;
    text-align: center;
    border: 6px solid white;
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    position: relative;
    max-width: 90%;
    animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.bubble-icon { font-size: 2rem; color: var(--accent-pop); display: block; margin-bottom: 10px; animation: ring 1s infinite; }
@keyframes ring { 0%, 100% { transform: rotate(0); } 25% { transform: rotate(15deg); } 75% { transform: rotate(-15deg); } }

.ac-title { font-family: var(--font-cute); color: var(--accent-pop); font-size: 2rem; margin-bottom: 10px; }
.triangle-down {
    width: 0; height: 0;
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    border-top: 20px solid var(--ui-cream);
    position: absolute; bottom: -20px; left: 50%; transform: translateX(-50%);
}
@keyframes popIn { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

/* --- Main Interface (Inventory Style) --- */
.hidden { display: none !important; }

#main-interface {
    height: 100vh; display: flex; justify-content: center; align-items: center;
    opacity: 0; animation: fadeIn 1s forwards; position: relative; z-index: 10;
}

.inventory-container {
    background: var(--ui-cream);
    width: 90%; max-width: 500px;
    border-radius: 40px;
    padding: 30px;
    border: 8px solid white;
    box-shadow: 0 15px 30px rgba(255, 143, 171, 0.3);
    display: flex; flex-direction: column; align-items: center;
}

.ac-header {
    display: flex; align-items: center; gap: 15px;
    width: 100%; margin-bottom: 25px;
    padding-bottom: 15px; border-bottom: 3px dashed var(--ui-border);
}

.header-tab {
    width: 50px; height: 50px; background: var(--accent-pop);
    border-radius: 50%; display: flex; justify-content: center; align-items: center;
    color: white; font-size: 1.5rem;
}
.header-text { display: flex; flex-direction: column; }
.tiny-label { font-size: 0.8rem; text-transform: uppercase; color: #aaa; letter-spacing: 1px; }
#dynamic-text { font-family: var(--font-cute); font-size: 1.8rem; color: var(--text-brown); }

/* GRID SYSTEM */
.inventory-grid {
    display: grid; grid-template-columns: repeat(3, 1fr);
    gap: 15px; width: 100%;
}

.slot-item {
    display: flex; flex-direction: column; align-items: center;
    cursor: pointer; transition: transform 0.2s ease;
}
.slot-item:hover { transform: scale(1.08); }

.item-bg {
    width: 80px; height: 80px;
    border-radius: 25px; /* Squircle */
    display: flex; justify-content: center; align-items: center;
    margin-bottom: 8px;
    border: 4px solid transparent;
    transition: all 0.2s;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
}
.slot-item:hover .item-bg { border-color: var(--accent-pop); background: white; }

/* Pastel Slot Colors */
.bg-cream { background: #fff5e1; }
.bg-blue { background: #e0f4ff; }
.bg-mint { background: #e6fffa; }
.bg-purple { background: #f3e6ff; }
.bg-pink { background: #ffe3e9; }

.item-icon { font-size: 2.2rem; filter: drop-shadow(1px 1px 0 rgba(0,0,0,0.1)); }
.item-label { font-size: 0.9rem; font-weight: bold; color: #999; transition: color 0.2s; }
.slot-item:hover .item-label { color: var(--accent-pop); }

.ac-footer {
    margin-top: 20px; background: var(--accent-pop); color: white;
    padding: 8px 25px; border-radius: 20px; font-size: 0.9rem;
    box-shadow: 0 4px 0 rgba(0,0,0,0.1);
}

/* --- Modal (Letter Paper) --- */
#reader-modal {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    z-index: 200; display: flex; justify-content: center; align-items: center;
    opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
}
#reader-modal.active { opacity: 1; pointer-events: auto; }

.modal-backdrop {
    position: absolute; width: 100%; height: 100%;
    background: rgba(255, 255, 255, 0.6); backdrop-filter: blur(5px);
}

.stationery-paper {
    position: relative; width: 90%; max-width: 550px; height: 80vh;
    background: #fff; border-radius: 10px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.15);
    /* Lined Paper */
    background-image: linear-gradient(#d6e4ff 1px, transparent 1px);
    background-size: 100% 2.5rem;
    padding: 30px;
    transform: rotate(1deg) translateY(50px);
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    display: flex; flex-direction: column;
}
#reader-modal.active .stationery-paper { transform: rotate(0deg) translateY(0); }

#close-btn {
    position: absolute; top: 15px; right: 15px;
    background: var(--accent-pop); color: white; border: none;
    width: 35px; height: 35px; border-radius: 50%;
    cursor: pointer; font-size: 1.2rem;
    box-shadow: 0 3px 0 rgba(0,0,0,0.1); transition: 0.2s;
}
#close-btn:hover { transform: translateY(2px); box-shadow: 0 1px 0 rgba(0,0,0,0.1); }

.scroll-content { overflow-y: auto; height: 100%; padding-right: 5px; }
.scroll-content::-webkit-scrollbar { width: 6px; }
.scroll-content::-webkit-scrollbar-thumb { background: var(--accent-pop); border-radius: 10px; }

.paper-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
.stamp-box {
    width: 50px; height: 50px; border: 3px dotted var(--accent-pop);
    display: flex; justify-content: center; align-items: center;
    color: var(--accent-pop); font-size: 1.5rem; border-radius: 5px; transform: rotate(-5deg);
}
#modal-title { font-family: var(--font-cute); font-size: 2rem; color: var(--text-brown); }
.dashed-line { border-bottom: 3px dashed var(--accent-teal); margin-bottom: 25px; opacity: 0.5; }

#modal-body { font-size: 1.2rem; line-height: 2.5rem; color: #555; }

.poem-style { text-align: center; font-style: italic; white-space: pre-wrap; color: var(--accent-pop); }
.letter-style { text-align: justify; white-space: pre-wrap; }

/* Media */
.media-image {
    width: 100%; border: 8px solid white; border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-bottom: 20px;
    transform: rotate(-2deg);
}
.video-wrapper {
    position: relative; padding-bottom: 56.25%; height: 0;
    overflow: hidden; border-radius: 10px; border: 5px solid white;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-top: 20px;
}
.video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

@keyframes fadeIn { to { opacity: 1; }}
@media (max-width: 400px) { .inventory-grid { grid-template-columns: repeat(2, 1fr); } }